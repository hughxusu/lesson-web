# 字符串

字符串数据类型，用于存储文本信息，用单引号、双引号或反引号包裹。

创建字符串：

1. 使用单引号或双引号创建字符串，单引号/双引号可以互相嵌套。

```js
let double = "此情可待成追忆，"
console.log(double);
let single = '只是当时已惘然。'
console.log(single);
let message = '李白诗中写道："事了拂衣去，深藏身与名……"'
console.log(message);
```

2. 使用反引号可以构造字符串，反引号形式的字符串支持换行。

```js
let one = `
葡萄美酒夜光杯，
欲饮琵琶马上催。
`
console.log(one);
```

3. 空字符串表示形式

```js
let emptyStr = ''; // 空字符串
console.log(emptyStr);
```

## 字符串编码

在计算机内存中，字符通过特定的编码方案存储为一系列的二进制数据。

ASCII码中，字符 'A' 在内存中存储为 `01000001`（`0x41`）。

```text
| 0 1 0 0 0 0 0 1 | (二进制)
|       41        | (十六进制)
```

字符串编码是指将字符转换为字节序列的过程，不同的编码标准将字符映射到不同的字节序列。

前端编程中使用的是UTF-8编码标准，它是一种变长的编码方式。它可以使用1~4个字节表示一个符号，根据不同的符号而变化字节长度，ASCII规范包含在Unicode中。

## 打印字符串

### 格式化输出

反引号是模板字符串，可以用于格式化输出。

```js
let name = prompt('请输入你的名字');
document.write(`用户: ${name}, 您好`)
document.write(`<h4>用户</h4> <h2>${name}</h2> <h4>您好</h4>`)

let num = prompt('请输入金额');
document.write(`<h4>打折后为</h4> <h2>${num * 0.8}</h2> <h4>元</h4>`)
```

### 转义字符

输出时具有特殊功能的字符。

| 转义字符       | 描述       |
| :------------- | :--------- |
| `\` (在行尾时) | 续行符     |
| `\\`           | 反斜杠符号 |
| `\"`           | 双引号     |
| `\'`           | 单引号     |
| `\n`           | 换行       |
| `\t`           | 横向制表符 |

```js
let message = 'Hello, \n world!'
console.log(message);
message = 'Hello, \t world!';
console.log(message);
```

## 字符串的操作

### 字符串拼接

字符之间可以使用`+`来进行拼接。

```js
let one = '秦时明月汉时关，'
let two = '万里长征人未还。'
console.log(one + two)

let num = 30
console.log(num)
console.log('我们班有' + num + '个同学') // 数据类型转换
```

赋值运算符`+=`也可以用于字符串拼接

```js
one += two
console.log(one)
```

### 字符串的比较

字符串比较，是比较的字符对应的 ASCII 码。从左往右依次比较，如果第一位一样再比较第二位，以此类推。由于字符串大小由字符编码决定，通常只使用`==`运算符比较两个字符串的内容是否相同。

```js
let one = '晚来天欲雪'
let two = '能饮一杯无'
let three = '晚来天欲雪'

console.log(one == two)
console.log(one == three)
```

使用`length`可以获得字符串长度

```js
console.log(one.length)
```

## 数据类型转换

把一种数据类型的变量，转换成程序需要的数据类型。观察如下代码

```js
let num1 = '1000'
let num2 = '2000'
console.log(num1 + num2)
```

如果要实现加法运算，需要将字符串转换为数字类型。

### 隐式转换

某些运算符被执行时，系统内部自动将数据类型进行转换，这种转换称为隐式转换。

1. `+`号两边只要有一个是字符串，都会把另外一个转成字符串。
2. 除了`+`以外的算术运算符 比如 `-`、`*`、`/`等都会把数据转成数字类型。
3. 比较运算符也会发生隐式转换

```js
console.log('Tom' + 18)
console.log(10 + '10') 
console.log(10 - '10') 
console.log(3 > '2')
```

4. 使用`+`（正号）可以将字符串转换为数字。

```js
let num = '10'
console.log(num)
console.log(+num)
console.log(10 + +'10')
```

### 显式转换

使用函数将数据，转换为特定的类型。

字符串转换为数字型

* `Number`转成数字类型，如果字符串内容里有非数字转换为`NaN`

```js
let a = Number('10')
console.log(a)
console.log(typeof a)
console.log(Number('10.01'))
console.log(Number('10.01abc')) // NaN
```

* `parseInt`只保留整数。

* `parseFloat`可以保留小数。


```javascript
console.log(parseInt('10'))
console.log(parseFloat('10.999'))

console.log(parseInt('100px'))
console.log(parseFloat('10.2px'))
console.log(parseFloat('px100px')) // NaN
```

数字转换为字符串

```js
console.log(String(10))
let age = 10
console.log(age.toString())
console.log(age.toString(2)) // 转换为二进制
```

> [!tip]
>
> 用户输入一个数，判断这个数是4的倍数，且不是100的倍数。用户没输入，默认数字为8。

```js
let num = prompt('请输入一个数')
console.log(num)
num = num || 8
console.log(num % 4 === 0 && num % 100 !== 0)
```

* `||`运算可以用来设置默认值。

## 综合案例

> [!tip]
>
> 打印学习成绩单：用户输入学生姓名、HTML/CSS成绩和JavaScript成绩，打印成绩和平均分。

```js
<style>
    * {
        margin: 0;
        padding: 0;
    }

    table {
        margin: 0 auto;
        text-align: center;
        border-collapse: collapse;
    }

    table th,
    td {
        border: 1px solid #000;
        padding: 15px;

    }

    table caption {
        margin: 15px 0;
    }
</style>
<script>
    let name = prompt('请输学生姓名:')
    let html = +prompt('请输入HTML/CSS成绩:')
    let js = +prompt('请输入JavaScript成绩:')
    let avg = (html + js) / 2

    document.write(`
        <table>
            <caption>
                <h2>学生成绩单</h2>
            </caption>
            <tr>
                <th>姓名</th>
                <th>HTML/CSS</th>
                <th>avaScript</th>
                <th>平均分</th>
            </tr>
            <tr>
                <td>${name}</td>
                <td>${html}</td>
                <td>${js}</td>
                <td>${avg}</td>
            </tr>
        </table>
    `)
</script>
